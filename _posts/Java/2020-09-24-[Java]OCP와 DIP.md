---
title: "[Java] OCP와 DIP"
tags:
  - Java
last_modified_at: 2020-09-24T08:06:00-05:00
key: "[Java] OCP와 DIP"
---

# OCP, DIP

객체지향 설계 5대 원칙(SOLID) 중 OCP와 DIP에 대해 알아보자.<br>

<!--more-->

## OCP(Open Closed Principle) : 개방 폐쇄 원칙

OCP -> 개방 폐쇄 원칙을 한 마디로 정의하면 `확장에는 개방되어 있어야 하고 변경에는 폐쇄되어 있어야 한다.`라는 원칙이다.<br>
모순적으로 들리는 말이지만 차근차근 알아보자.<br>
핸드폰의 사용자가 있고, 사용자는 아이폰에 의존한다고 생각해보자.<br>
그러면 사용자와 아이폰의 의존 관계는 다음과 같이 된다.<br>

![1](assets/images/200924-1.png)<br>

위와 같은 상황에서 사용자의 핸드폰이 안드로이드폰으로 바뀐다고 해보자<br>
그러면 사용자는 아이폰에서 안드로이드폰에 대한 사용법을 다시 배워야 한다.<br>
애초에 사용자에게 아이폰과 안드로이드폰에 대한 공통의 가이드라인이 주어지고, 아이폰과 안드로이드폰이 그 가이드에 맞게 제작되면 어떻게 될까?<br>
사용자가 아이폰에서 다른 기종으로 바꿔도 사용법을 다시 익힐 필요는 없다.<br>
또한, 아이폰과 안드로이드폰이 아닌 다른 회사의 폰도 가이드라인에 맞게 제작된다면 사용자는 사용법을 다시 배우지 않아도 자연스럽게 사용할 수 있다.<br>

![2](assets/images/200924-2.png)<br>

객체지향도 이와 같다.<br>
변경 가능성이 있는 객체를 클라이언트 입장에서 구현체가 의존하는 게 하는 방식보다는, 인터페이스를 만들어서 의존하게 하고, 그 인터페이스를 확장해서 구현체를 만드는 방식을 사용해야 한다.<br>
클라이언트가 되는 객체 입장에선 인터페이스를 의존하므로, 구현체가 바뀌어도 코드를 따로 바꿀 필요가 없다.
이렇게 변경할 필요가 없는 점을 `변경에는 폐쇄되어 있다`라고 한다.<br>
또한, 새로운 핸드폰이 추가되어도 가이드라인을 지키면 사용자가 사용법을 다시 익힐 필요 없듯이, 인터페이스를 확장하는 구현체를 무수히 만들더라도, 클라이언트 입장에서는 변경에 닫혀있다.<br>
이러한 상황을 `확장에는 개방되어 있다.`라고 한다.<br>
위 두 사항을 준수하면서 객체지향 설계를 하는 원칙이 `OCP(Open Closed Principle) : 개방 폐쇄 원칙`이다.<br>

## DIP(Dependency Inversion Principle) : 의존 역전 원칙

DIP -> 의존 역전 원칙을 한 마디로 정의하면 `상위 클래스는 하위 클래스에 의존하면 안된다.`라는 원칙이다.<br>
더 풀어쓰면 자주 변하고, 구체적인 것에 의존하면 안 되고, 자주 변하지 않고 추상적이고 자주 변하지 않는 것에 의존해야 된다는 원칙이다.<br>
DIP는 위의 OCP를 이해했다면 수월하게 생각할 수 있다.<br>
위의 예제에서 사용자가 아이폰, 안드로이드폰과 같이 구체적이고 자주 변하는 것에 의존하는 것이 아닌, 가이드라인에 의존했다.<br>
객체지향에서도 클라이언트가 인터페이스에 의존하면 인터페이스 아래의 구현체가 변해도 유지 보수에 좋은 객체지향적 설계의 효과를 누릴 수 있다.<br>
위의 효율적인 유지 보수를 위해 객체지향에선 다형성을 활용해서 OCP와 DIP를 염두에 두고 설계하는 것이 중요하다.<br>