---
layout: article
title: "[JPA] Entity들 간의 관계"
tags:
  - JPA
date: 2020-09-02T08:06:00-05:00
key: "[JPA] Entity들 간의 관계"
---

# Entity들 간의 관계

일대다(One-to-Many), 다대일(Many-to-One), 다대다(Many-to-Many) 관계에 대해 알아보자.

<!--more-->

## 개체, 관계, 속성

데이터베이스의 개념적 구성 요소는 개체(Entity), 관계(Relationship), 속성(Attriube) 세 가지로 이루어져 있다.<br>

여기서 개체는 데이터베이스에서 다루는 사물, 즉 대상을 말하는 것이고, 관계는 그 사물들끼리의 연관을 얘기하는 것이고, 속성은 그 사물들이 가지고 있는 각자의 특성을 말하는 용어이다.<br>

회원들이 글을 작성할 수 있는 게시판 웹을 만든다고 생각해보자.<br>
우선적으로 회원이 필요하고, 그 회원이 쓸 수 있는 게시글이 필요하다.<br>
그러므로 이때 필요한 개체(Entity)는 회원(User), 게시글(Board)인 두 개의 개체가 필요하다.<br>

또 두 개체의 사이를 확인하며 관계에 대해 설명할 수 있다.<br>
한 명의 회원은 여러 가지 게시글을 쓸 수 있지만, 게시글은 게시글이 쓴 회원이 여러 명이 될 수 없고 오직 한 명의 회원만 게시글의 작성자가 될 수 있다.<br>
그러므로 회원과 게시글의 관계(Relationship)는 `일대다(One-to-Many, 1:m) 관계`임을 알 수 있다.<br>
또한 반대로 게시글과 회원의 관계(Relationship)는 `다대일(Many-to-One, 1:m) 관계`임을 알 수 있다.<br>
이외에도 `다대다(Many-to-Many)` 관계도 있다.<br>

마지막으로 회원 개체와 게시글 개체가 각각 가지고 있는 특성을 속성이라고 할 수 있다.<br>
회원의 경우엔 회원의 회원 번호, 이름, 비밀번호, 이메일 등이 속성이라고 할 수 있고, 게시물의 경우엔 게시물 번호, 게시물 제목, 게시물 내용, 게시물 조회 수 등이 속성이라고 할 수 있다.<br>

## JPA의 관계 어노테이션

위의 예시를 바탕으로 User와 Board Model이 있다고 하자.<br>

게시판을 불러올 때, 항상 그 게시판을 쓴 작성자의 정보를 가져와야 하므로,  게시판에서 관계에 대한 어노테이션을 붙여준다.<br>

`Board.java`
```java
    // ...

	@ManyToOne
	@JoinColumn(name = "userId")
	private User user;

    // ...
```
한 명의 User가 다수의 게시판을 작성할 수 있으므로 게시판의 입장에서 `ManyToOne` 어노테이션을 붙여주어야 한다.<br>
`Many = Board, One = User`의 관계이다.<br>
User 게시판과 Join이 필요하므로 `@JoinColumn(name = "userId")`도 붙여준다.<br>
원래 DB는 오브젝트를 저장할 수 없어서 FK를 사용하지만, 자바는 오브젝트를 저장할 수 있으므로 User 오브젝트를 붙여준다.<br>
이런 관계형 데이터베이스와 객체지향 언어의 패러다임 차이를 JPA가 해결해 준다.<br>